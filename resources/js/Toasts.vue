<template>
    <div class="toasts-wrapper">
        <div v-for="toast in toasts" :class="`toast toast-${toast.type}`" @click="dismiss(toast.id)">
            <svg v-if="toast.type === 'danger'" class="toast-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path opacity="0.5" d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="white"/>
                <path d="M12 17C12.5523 17 13 16.5523 13 16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16C11 16.5523 11.4477 17 12 17Z" fill="white"/>
                <path d="M12 13C11.7348 13 11.4804 12.8946 11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12V8C11 7.73478 11.1054 7.48043 11.2929 7.29289C11.4804 7.10536 11.7348 7 12 7C12.2652 7 12.5196 7.10536 12.7071 7.29289C12.8946 7.48043 13 7.73478 13 8V12C13 12.2652 12.8946 12.5196 12.7071 12.7071C12.5196 12.8946 12.2652 13 12 13Z" fill="white"/>
            </svg>
            <svg v-else-if="toast.type === 'success'" class="toast-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path opacity="0.99" d="M10.313 16.094C10.1815 16.0943 10.0512 16.0685 9.92973 16.0182C9.80822 15.9679 9.69786 15.8941 9.605 15.801L6.793 12.988C6.61085 12.7994 6.51005 12.5468 6.51233 12.2846C6.51461 12.0224 6.61978 11.7716 6.80518 11.5862C6.99059 11.4008 7.2414 11.2956 7.5036 11.2933C7.7658 11.291 8.0184 11.3918 8.207 11.574L10.312 13.68L15.793 8.19999C15.9823 8.0222 16.2334 7.92504 16.4931 7.92908C16.7528 7.93311 17.0007 8.03802 17.1844 8.2216C17.3681 8.40518 17.4732 8.65304 17.4774 8.91272C17.4816 9.1724 17.3847 9.42354 17.207 9.61299L11.019 15.801C10.9263 15.894 10.8161 15.9677 10.6947 16.018C10.5734 16.0683 10.4433 16.0941 10.312 16.094H10.313Z" fill="white"/>
                <path opacity="0.5" d="M12 2C10.0222 2 8.08879 2.58649 6.44429 3.6853C4.7998 4.78412 3.51808 6.3459 2.7612 8.17317C2.00433 10.0004 1.80629 12.0111 2.19214 13.9509C2.578 15.8907 3.5304 17.6725 4.92893 19.0711C6.32745 20.4696 8.10928 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C21.9971 9.34873 20.9426 6.80688 19.0678 4.93215C17.1931 3.05742 14.6513 2.00291 12 2V2ZM17.207 9.613L11.019 15.801C10.8315 15.9885 10.5772 16.0938 10.312 16.0938C10.0468 16.0938 9.79252 15.9885 9.605 15.801L6.793 12.988C6.61084 12.7994 6.51004 12.5468 6.51232 12.2846C6.5146 12.0224 6.61977 11.7716 6.80518 11.5862C6.99059 11.4008 7.2414 11.2956 7.5036 11.2933C7.76579 11.291 8.01839 11.3918 8.207 11.574L10.312 13.68L15.793 8.2C15.9823 8.02221 16.2334 7.92505 16.4931 7.92909C16.7528 7.93312 17.0007 8.03803 17.1844 8.22161C17.3681 8.40519 17.4732 8.65305 17.4774 8.91273C17.4816 9.17241 17.3847 9.42355 17.207 9.613V9.613Z" fill="white"/>
            </svg>
            <p class="toast-text">{{ toast.message }}</p>
        </div>
    </div>
</template>

<script>
    export default {
        data() {
            return {
                toasts: [],
            };
        },

        methods: {
            show: function (message, type = 'success', timeout = 3000) {
                let toast = {
                    id: Date.now().toString() + this.toasts.length,
                    message: message,
                    type: type,
                };

                this.toasts.push(toast);

                setTimeout(() => {
                    this.dismiss(toast.id);
                }, timeout);
            },

            dismiss: function(id) {
                let index = this.toasts.map(function(toast) { return toast.id; }).indexOf(id);
                if (index < 0) return;
                this.toasts.splice(index, 1);
            },

            clear: function() {
                this.toasts = [];
            }
        }
    }
</script>